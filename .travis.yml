language: cpp
sudo: required
dist: trusty


cache:
    directories:
      - ${HOME}/.conan

matrix:
  include:
    - os: linux
      dist: trusty
      sudo: required
      compiler:
        - gcc
      before_install:
        - source .CI/travis/install_linux.sh
        - source .CI/travis/install-arrayfire.sh
        - source .CI/travis/install-cmake.sh
      script:
        - source .CI/travis/build_linux.sh
      after_success:
        - source .CI/travis/codecov.sh

    - os: linux
      dist: trusty
      sudo: required
      compiler:
        - clang
      before_install:
        - source .CI/travis/install_linux.sh
        - source .CI/travis/install-arrayfire.sh
        - source .CI/travis/install-cmake.sh
      script:
        - source .CI/travis/build_linux.sh

    - os: osx
      osx_image: xcode9.3
      compiler:
        - gcc
      before_install:
        - source .CI/travis/install_osx.sh
        - source .CI/travis/install-arrayfire_osx.sh
      script:
        - source .CI/travis/build_osx.sh

    - os: osx
      osx_image: xcode9.3
      compiler:
        - clang
      before_install:
        - source .CI/travis/install_osx.sh
        - source .CI/travis/install-arrayfire_osx.sh
      script:
        - source .CI/travis/build_osx.sh

      after_success:
        - source .CI/travis/codecov.sh


